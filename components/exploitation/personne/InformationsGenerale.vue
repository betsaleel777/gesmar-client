<template>
  <b-overlay :show="$fetchState.pending" spinner-variant="primary" rounded="sm">
    <div class="row">
      <div class="col-md-2"></div>
      <div class="col-md-8">
        <center class="my-6"><h5>Informations du client</h5></center>
        <div class="row">
          <div class="col-md-6 col-sm-6">
            <div v-if="client.nom">
              <label class="form-label"
                ><strong>Nom:</strong> <span class="">{{ client.nom }}</span></label
              >
            </div>
            <div v-if="client.adresse">
              <label class="form-label"
                ><strong>Adresse:</strong> <span class="">{{ client.adresse }}</span></label
              >
            </div>
            <div v-if="client.email">
              <label class="form-label"
                ><strong>Email:</strong> <span class="">{{ client.email }}</span></label
              >
            </div>
            <div v-if="client.email">
              <label class="form-label"
                ><strong>Nationalite:</strong> <span class="">{{ client.nationalite }}</span></label
              >
            </div>
            <div v-if="client.profession">
              <label class="form-label"
                ><strong>Nationalite:</strong> <span class="">{{ client.numero_compte }}</span></label
              >
            </div>
            <div v-if="client.profession">
              <label class="form-label"
                ><strong>Profession:</strong> <span class="">{{ client.profession }}</span></label
              >
            </div>
            <div v-if="client.nom_complet_pere">
              <label class="form-label"
                ><strong>Profession:</strong> <span class="">{{ client.nom_complet_pere }}</span></label
              >
            </div>
          </div>
          <div class="col-md-6 col-sm-6">
            <div v-if="client.prenom">
              <label class="form-label"
                ><strong>Prenom:</strong> <span class="">{{ client.prenom }}</span></label
              >
            </div>
            <div v-if="client.contact">
              <label class="form-label"
                ><strong>Contact:</strong> <span class="">{{ client.contact }}</span></label
              >
            </div>
            <div v-if="client.ville">
              <label class="form-label"
                ><strong>Ville:</strong> <span class="">{{ client.ville }}</span></label
              >
            </div>
            <div v-if="client.banque">
              <label class="form-label"
                ><strong>Profession:</strong> <span class="">{{ client.banque }}</span></label
              >
            </div>
            <div v-if="client.naissance">
              <label class="form-label"
                ><strong>Profession:</strong> <span class="">{{ client.naissance }}</span></label
              >
            </div>
            <div v-if="client.lieu_naissance">
              <label class="form-label"
                ><strong>Profession:</strong> <span class="">{{ client.lieu_naissance }}</span></label
              >
            </div>
            <div v-if="client.nom_complet_mere">
              <label class="form-label"
                ><strong>Profession:</strong> <span class="">{{ client.nom_complet_mere }}</span></label
              >
            </div>
          </div>
        </div>
        <center class="my-6"><h5>Informations du Matrimoniales</h5></center>
        <div class="row">
          <div class="col-md-12 col-sm-12">
            <v-app>
              <v-radio-group
                v-model="client.situation_matrimoniale"
                row
                dense
                :error="errors.situation_matrimoniale.exist"
                :error-messages="errors.situation_matrimoniale.message"
                @change="hideMariedFields"
              >
                <v-radio label="En concubinage" :value="SITUATION.concubinage"></v-radio>
                <v-spacer></v-spacer>
                <v-radio label="Marié" :value="SITUATION.mariage"></v-radio>
                <v-spacer></v-spacer>
                <v-radio label="Célibataire" :value="SITUATION.celibat"></v-radio>
              </v-radio-group>
            </v-app>
          </div>
          <div class="col-md-6 col-sm-6">
            <div v-if="client.nom_complet_conjoint">
              <label class="form-label"
                ><strong>Nom complet du conjoint:</strong> <span class="">{{ client.nom_complet_conjoint }}</span></label
              >
            </div>
            <div class="form-group">
              <div v-if="client.naissance_conjoint">
                <label class="form-label"
                  ><strong>Date de naissance conjoint:</strong> <span class="">{{ client.naissance_conjoint }}</span></label
                >
              </div>
            </div>
            <div class="form-group">
              <div v-if="client.date_mariage">
                <label class="form-label"
                  ><strong>Date de mariage:</strong> <span class="">{{ client.date_mariage }}</span></label
                >
              </div>
            </div>
          </div>
          <div class="col-md-6 col-sm-6">
            <div v-if="client.lieu_mariage">
              <label class="form-label"
                ><strong>Lieu de mariage:</strong> <span class="">{{ client.lieu_mariage }}</span></label
              >
            </div>
            <div v-if="client.regime">
              <label class="form-label"
                ><strong>Régime matrimoniale:</strong> <span class="">{{ client.regime }}</span></label
              >
            </div>
            <div v-if="client.profession_conjoint">
              <label class="form-label"
                ><strong>Profession conjoint:</strong> <span class="">{{ client.profession_conjoint }}</span></label
              >
            </div>
          </div>
        </div>
        <center class="my-6"><h5>Fichiers d'identification</h5></center>
        <div class="row">
          <div class="col-md-6 col-sm-6">
            <div v-if="!client.image_identite" class="avatar avatar-xxl">
              <b-img v-if="client.photo_identite" lazy :src="client.photo_identite" class="rounded-circle" alt="image identité" />
              <img v-else src="https://via.placeholder.com/500/637382/fff" class="rounded-circle" alt="" />
            </div>
          </div>
          <div class="col-md-6 col-sm-6">
            <div v-if="!client.image_carte" class="avatar avatar-xxl">
              <b-img v-if="client.photocopie_carte" lazy :src="client.photocopie_carte" class="rounded-circle" alt="image identité" />
              <img v-else src="https://via.placeholder.com/500/637382/fff" class="rounded-circle" alt="" />
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-2"></div>
    </div>
  </b-overlay>
</template>

<script>
import { MATRIMONIALE } from '~/helper/constantes'
export default {
  props: {
    personne: {
      type: Object,
      required: true,
    },
  },
  data: () => ({
    SITUATION: MATRIMONIALE,
    disableMariedFields: false,
    disableCoupleFields: false,
    client: {},
    errors: {
      nom: { exist: false, message: null },
      prenom: { exist: false, message: null },
      ville: { exist: false, message: null },
      email: { exist: false, message: null },
      adresse: { exist: false, message: null },
      contact: { exist: false, message: null },
      site_id: { exist: false, message: null },
      nationalite: { exist: false, message: null },
      profession: { exist: false, message: null },
      lieu_naissance: { exist: false, message: null },
      naissance: { exist: false, message: null },
      nom_complet_pere: { exist: false, message: null },
      nom_complet_mere: { exist: false, message: null },
      nom_complet_conjoint: { exist: false, message: null },
      situation_matrimoniale: { exist: false, message: null },
      lieu_mariage: { exist: false, message: null },
      naissance_conjoint: { exist: false, message: null },
      regime: { exist: false, message: null },
      profession_conjoint: { exist: false, message: null },
      date_mariage: { exist: false, message: null },
      image_identite: { exist: false, message: null },
      image_carte: { exist: false, message: null },
    },
  }),
  fetch() {
    this.client = this.personne
    this.hideMariedFields()
  },
  methods: {
    hideMariedFields() {
      if (this.client.situation_matrimoniale === this.SITUATION.celibat) {
        this.disableMariedFields = true
        this.disableCoupleFields = true
      } else if (this.client.situation_matrimoniale === this.SITUATION.concubinage) {
        this.disableMariedFields = true
        this.disableCoupleFields = false
      } else {
        this.disableMariedFields = false
        this.disableCoupleFields = false
      }
    },
  },
}
</script>
