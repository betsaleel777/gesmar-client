<template>
  <div class="container-fluid">
    <b-overlay :show="$fetchState.pending" spinner-variant="primary" rounded="sm">
      <div class="row">
        <div class="col-sm-6 col-lg-4">
          <GridCounter :options="optionsDemande" />
        </div>
        <div class="col-sm-6 col-lg-4">
          <GridCounter :options="optionsPersonne" />
        </div>
        <div class="col-sm-6 col-lg-4">
          <GridCounter :options="optionsEquipement" />
        </div>
        <div class="col-sm-6 col-lg-4">
          <GridCounter :options="optionsEmplacement" />
        </div>
        <div class="col-sm-6 col-lg-4">
          <GridCounter :options="optionsAbonnement" />
        </div>
        <div class="col-sm-6 col-lg-4">
          <GridCounter :options="optionsGearsEmplacement" />
        </div>
      </div>
    </b-overlay>
  </div>
</template>

<script>
import { mapActions, mapGetters } from 'vuex'
import GridCounter from '~/components/dashboard/GridCounter.vue'
import { MODULES } from '~/helper/modules-types'
export default {
  components: { GridCounter },
  async fetch() {
    await this.getReception()
  },
  computed: {
    ...mapGetters({ reception: MODULES.DASHBOARD.GETTERS.RECEPTION }),
    optionsDemande() {
      return {
        title: 'Taux de concrétisation des demandes',
        firstPercentName: 'Demandes en cours',
        secondPercentName: 'Demandes Validées',
        firstCount: Number(this.reception.demandesEnCours),
        secondCount: Number(this.reception.demandesValidees),
      }
    },
    optionsPersonne() {
      return {
        title: 'Taux de convertion des prospects',
        firstPercentName: 'Prospects',
        secondPercentName: 'Clients',
        firstCount: Number(this.reception.prospects),
        secondCount: Number(this.reception.clients),
      }
    },
    optionsEmplacement() {
      return {
        title: "Taux d'occupation des emplacements",
        firstPercentName: 'Emplacements Disponibles',
        secondPercentName: 'Emplacements Occupés',
        firstCount: Number(this.reception.emplacementsDisponibles),
        secondCount: Number(this.reception.emplacementsOccupes),
      }
    },
    optionsGearsEmplacement() {
      return {
        title: "Taux d'équipement des emplacements",
        firstPercentName: 'Avec Equipement',
        secondPercentName: 'Sans Equipement',
        firstCount: Number(this.reception.emplacementsEquipes),
        secondCount: Number(this.reception.emplacementsSansEquipement),
      }
    },
    optionsAbonnement() {
      return {
        title: "Taux d'abonnement par emplacement",
        firstPercentName: 'Avec Abonnements',
        SecondPercentName: 'Sans Abonnements',
        firstCount: Number(this.reception.emplacementsAbonnes),
        secondCount: Number(this.reception.emplacementsNonAbonnes),
      }
    },
    optionsEquipement() {
      return {
        title: "Taux d'occupation des équipements",
        firstPercentName: 'Equipements Liés',
        SecondPercentName: 'Equipements Libres',
        firstCount: Number(this.reception.equipementsLies),
        secondCount: Number(this.reception.equipementsLibres),
      }
    },
  },
  methods: {
    ...mapActions({ getReception: MODULES.DASHBOARD.ACTIONS.RECEPTION }),
  },
}
</script>

<style scoped></style>
