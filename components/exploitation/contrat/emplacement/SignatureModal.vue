<template>
  <b-modal v-model="dialog">
    <template #modal-header>
      <h5 class="modal-title text-primary">Signer le contrat</h5>
      <button type="button" class="close" aria-label="Close" @click="dialog = false">
        <span aria-hidden="true"><feather type="x" /></span>
      </button>
    </template>
    <template #default>
      <b-overlay :show="submiting" spinner-variant="primary" rounded="sm">
        <v-app>
          <v-file-input v-model="attachment" show-size dense outlined truncate-length="20" label="fichier du contrat signÃ©" class="mt-2"></v-file-input>
          <v-dialog ref="dialog" v-model="modal" :return-value.sync="date_signature" :retain-focus="false" persistent width="290px">
            <template #activator="{ on, attrs }">
              <v-text-field
                v-model="date_signature"
                label="Date de signature"
                outlined
                dense
                prepend-icon="mdi-calendar"
                readonly
                v-bind="attrs"
                v-on="on"
              ></v-text-field>
            </template>
            <v-date-picker v-model="date_signature" locale="fr" scrollable>
              <v-spacer></v-spacer>
              <v-btn text color="primary" @click="modal = false"> Fermer </v-btn>
              <v-btn text color="primary" @click="$refs.dialog.save(date_signature)"> OK </v-btn>
            </v-date-picker>
          </v-dialog>
        </v-app>
      </b-overlay>
    </template>
    <template #modal-footer>
      <button type="button" class="btn btn-warning" data-dismiss="modal" @click="dialog = false">Fermer</button>
      <button type="button" :disabled="submiting" class="btn btn-primary text-white" @click="save">Valider</button>
    </template>
  </b-modal>
</template>

<script>
import modal from '~/mixins/modal'
export default {
  mixins: [modal],
  data: () => ({
    modal: false,
    attachment: null,
    submiting: false,
    date_signature: null,
  }),
  methods: {
    save() {},
  },
}
</script>
