<template>
  <div>
    <PartialBreadcrumb :liens="liens" />
    <div class="col-md-12 col-sm-12">
      <b-tabs v-model="tabIndex" lazy content-class="mt-7" active-nav-item-class="font-weight-bold">
        <b-tab title="Informations Générales" :title-link-class="linkClass(0)">
          <InformationsGenerale :id="$route.params.id" />
        </b-tab>
        <b-tab title="Demandes" :title-link-class="linkClass(1)">
          <ListeDemandePersonne :id="$route.params.id" />
        </b-tab>
        <b-tab title="Contrat en cours" :title-link-class="linkClass(2)">
          <ListeContratPersonne :id="$route.params.id" />
        </b-tab>
        <b-tab title="Anciens Contrats" :title-link-class="linkClass(3)"> Anciens Contrats </b-tab>
      </b-tabs>
    </div>
    <!-- content-right -->
  </div>
</template>
<script>
import { mapActions } from 'vuex'
import InformationsGenerale from '~/components/exploitation/personne/InformationsGenerale.vue'
import ListeDemandePersonne from '~/components/exploitation/personne/ListeDemandePersonne.vue'
import ListeContratPersonne from '~/components/exploitation/personne/ListeContratPersonne.vue'
import PartialBreadcrumb from '~/components/partials/PartialBreadcrumb.vue'
export default {
  components: {
    PartialBreadcrumb,
    InformationsGenerale,
    ListeDemandePersonne,
    ListeContratPersonne,
  },
  data: () => ({
    tabIndex: 0,
    liens: [{ path: '/exploitation/reception', text: 'Réception' }],
  }),
  mounted() {
    this.getOne(this.$route.params.id).then(({ alias }) => {
      this.liens.push({ path: '#', text: alias })
    })
  },
  methods: {
    ...mapActions({ getOne: 'exploitation/personne/getOne' }),
    linkClass(idx) {
      if (this.tabIndex === idx) {
        return ['bg-white', 'text-primary']
      } else {
        return ['bg-light', 'text-primary']
      }
    },
  },
}
</script>
<style></style>
