<template>
  <div>
    <partial-breadcrumb :liens="liens" />
    <div class="col-md-12 col-sm-12">
      <b-tabs
        v-model="tabIndex"
        lazy
        content-class="mt-7"
        active-nav-item-class="font-weight-bold"
      >
        <b-tab title="Tableau" :title-link-class="linkClass(0)">
          <tableau-maintenance />
        </b-tab>
        <b-tab
          :disabled="disableReparation"
          title="Reparations"
          :title-link-class="linkClass(1)"
        >
          <liste-reparation />
        </b-tab>
        <b-tab
          :disabled="disableOrdre"
          title="Ordre de rÃ©parations"
          :title-link-class="linkClass(2)"
        >
          <liste-ordre />
        </b-tab>
      </b-tabs>
    </div>
    <!-- content-right -->
  </div>
</template>
<script>
import PartialBreadcrumb from '~/components/partials/PartialBreadcrumb.vue'
import TableauMaintenance from '~/components/exploitation/maintenance/TableauMaintenance.vue'
import ListeReparation from '~/components/exploitation/maintenance/reparation/ListeReparation.vue'
import ListeOrdre from '~/components/exploitation/maintenance/ordre/ListeOrdre.vue'
import { exploitation } from '~/helper/permissions'
const permissions = exploitation.maintenance
export default {
  components: {
    PartialBreadcrumb,
    TableauMaintenance,
    ListeOrdre,
    ListeReparation
  },
  data: () => ({
    liens: [{ path: '#', text: 'Maintenance' }],
    tabIndex: 0,
    permissions
  }),
  computed: {
    disableReparation() {
      return !this.$gates.hasPermission(permissions.reparation.acceder)
    },
    disableOrdre() {
      return !this.$gates.hasPermission(permissions.ordre.acceder)
    }
  },
  methods: {
    linkClass(idx) {
      if (this.tabIndex === idx) {
        return ['bg-white', 'text-primary']
      } else {
        return ['bg-light', 'text-primary']
      }
    }
  }
}
</script>
<style></style>
